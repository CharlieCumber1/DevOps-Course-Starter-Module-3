script:
- docker build --target test --tag todo-app:test .
- docker run todo-app:test tests
- docker run -e MONGODB_CONNECTION_STRING todo-app:test e2e_tests
deploy:
  provider: script
  script: bash deploy.sh
  on:
    branch: module-12
env:
  global:
  - DOCKER_USERNAME=charliecumber
  - secure: CPAHjkwOZo2p3E1W3+KaR13yZ4RAF5OlNwdugM8KbcmvF9p8B0tpTzkdBAYuBqOmp0OGkrMrHcUs31fY5g5/cH2KZ9n6xsFPRvHPTJui6i3h9UGQI4IA5hEa6TPo9qwx/6B7kKWfqlrvE5iWbzDMKXnT4M90Zx2JVNQA2ltsiBhDMEsOpl+qfStvhoTuI9EYexh2pgBXID6UVGZruM262r8ScmgIhZ12YHIt2rhMY4De+EWmvRBMrgbyMGQYU2FDQpYraQY837R/E7t5UFwzu6bqTkAd5ZeHiwO81zgEWB+xhoJqQxKuD9HVLK1qO0xfZYO1geiMS08kWZ8STGiAiKYFaW054qToStzu5r8QTw2A8ZN75cpDSvgg4Ki2/r1kVvvsvip5OUESfOIta22jn9+WMfTKDd+4IMYrWbbDQgcaKp+AQhOlYo2jhHNVIn308LivJQXqhAT/XR/hW36EKp0zZgUt2wlSgghHRQ3Is/frMeLDEKvaJMV4Cq8YQM/nqW0BKkGkaTYoLQClpstkzRjcY3ZUDAyxRDZtvD7E/Rfr7/MO/LCQ6XLUjiQB+st8rCFcASHRo7S44CKbGo+H/ocWXOnBnBwCO4b4L+EBYm7YdoYOtj25AqursTC6yLkKa0d1XtGqX4L0+tLMGgZrjaEbe3Zx2apVatLSQT4V1to=
  - secure: de6os6dNL52E1bwQV9XjsbPHKrRGaDkI7bAe4B9CJifPlcunKr0bFnmc7EJvTVKBD/alHB7uJmhgf7Xdjh6jfGXcp1t6BRlDTpB9YQIwTu+SHcEd4M5apZ0G465J/sSz9R4DEuWHhgfauJGqoc+qXfPPEVW0Yl1xZLTMuaPXrGCyr3G3MRfUC3D99P4NuMjj8NB0pQmDSFOunKvQgBhD7PVzqmkSdNECcyGecMO8Y9DRXv+1Jf4NXeWUH5N6IbEUpEL2L6vy9rJUFQDNx9PCMww9QiOLyAxGcavWoFNDXbOb4CkKTXS3ByEPza9b5f9/xKb7oDecXFne2FYDWH9+NayWdBGvApbfNliN65CMJvtTma+geQn5YyaErYJLfdZs6PShjxCAw0wJmRF1aXjbTksyzLJ6WdvWFRwQzgfxurUYLzdMEaAVnsH2X0Pa6OTW4SxVXjb17DByd1cdTg0uebs+ZTpYmC4Fpwn5xLgS//+KFY2P89DMPqbu20vTpAvM3ViTOAsP1UATSwnK0wp+2J2V0lTpi4JzEUEitqGK/FrXhA9BlsgTCp1WtzvaAy+TkX5v7fMz66emWiqEOXW94SVP6E5HmyigT9j6b6GbvRRtMVoFsMLc5qI5tUWpTThZRrRTPaVCUGe32sxMlv+/L7PnoXg6y0mKjt9E9wnN//U=
  - secure: hQFReQwF0OkTLHZuEQu7uQiHOlRhozMd0eMKCAqz6zflaWl1wxH4tUlY3CFQgmJ+Fize0NsUwU+yGKaLyhcxxCbiqkPVYEivsvSrcR/JRDFIS27UKn1zWu4aEEprd0W/ZsDGdZYDOxbXbkUEpxczG1nZ5sLJURAEKpT5ul0ERq7b3e4JlGE7HaAY8fA05+rtpCYWyS9j9CWwZ8kQ/tRep7oPVCxnoitOPRfrxhl8R6FYTxfM+tKP3wHw8eXV2tinRBMP326mdFBHTvrVHvvZQuANVkHyMZmdQNgDaVysMFmJvHJsBjdTtWjzUxFt0l37NFHBuKOotlcpCKUMBRoQ41TSLPbex2JTzfBg/7yC6jvm2fYT4CzQvlArrA4n6SI1PPF+CXEemUTPQJISjq1JgPtjR6LoEHpqmpoqhHnjuVjTgx5cxhGImhZCT1mY3SBDc7rgc6D+4pLVP19/k/rp7ENdqXs66PsDQf4+kWIr0nCSTjr/bGt1S42zWsg/jAq6895EZyiAr4dBrqTzBH4045VYKW6Ao+FJOG4j0p2w+DvsMOCn9zUlpahL7BbcQeD1VYvMfAZbYq7aXenKgpiVY2lxDpgxwbOWdSIZlPF54oHSs3EL52OtYE4rPOs9IuVlSISrG/dnBTPst4Iqi0oHY03SUoqFCD5Dv8sn/7mmYHY=
